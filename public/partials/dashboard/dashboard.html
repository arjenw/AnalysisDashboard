<div class="row-fluid" style="font-size: 16px;">
	<div class="span3">
		<div>
			<!-- Computers -->
			
			
			<p class="text-error"><Strong>Offline computers</Strong></p>
			<div ng-repeat="computer in computers | filter:{offline:true, watch:true} |orderBy:'displayName'">
				<div class="alert" ng-mouseenter="computer.showActions=true" ng-mouseleave="computer.showActions=false" style="margin-bottom: 0px;" 
					ng-class="{ 'alert-error': computer.offline, 'alert-success': !computer.offline && computer.diskSpaceLeft>3}">
					<img ng-src="img/{{imageComputerStatus(computer)}}"/>&nbsp;
					<strong>{{computer.displayName}}</strong><BR>
					<span style="font-size: 12px;" ng-show="computer.diskSpaceLeft>0"> has {{computer.diskSpaceLeft}}Gb left.</span><span style="font-size: 12px;">{{computer.offlineCause}}</span><BR>
					<ul class="inline" ng-show="computer.showActions" style="font-size: 12px;">
						<li><a href="{{computer.url}}" target="_blank"><i class="icon-circle-arrow-right"></i>&nbsp;URL</a></li>
						<li><a href="" ng-click="createComputerTask(computer)"><i class="icon-wrench"></i>&nbsp;Add task to fix this</a></li>
					</ul>
				</div>
			</div>
			<BR>
			<p class="text-info"><Strong>Computers in watch list</Strong></p>
			<div ng-repeat="computer in computers | filter:{stickyWatch:true} |orderBy:'displayName'">
				<div class="alert" ng-mouseenter="computer.showActions=true" ng-mouseleave="computer.showActions=false" style="margin-bottom: 0px;" 
					ng-class="{ 'alert-error': computer.offline, 'alert-success': !computer.offline && computer.diskSpaceLeft>3}">
					<img ng-src="img/{{imageComputerStatus(computer)}}"/>&nbsp;
					<strong>{{computer.displayName}}</strong><BR>
					<span style="font-size: 12px;" ng-show="computer.diskSpaceLeft>0"> has {{computer.diskSpaceLeft}}Gb left.</span><span style="font-size: 12px;">{{computer.offlineCause}}</span><BR>
					<ul class="inline" ng-show="computer.showActions" style="font-size: 12px;">
						<li><a href="{{computer.url}}" target="_blank"><i class="icon-circle-arrow-right"></i>&nbsp;URL</a></li>
						<li><a href="" ng-click="createComputerTask(computer)"><i class="icon-wrench"></i>&nbsp;Add task to fix this</a></li>
					</ul>
				</div>
			</div>
			<BR>
			<div class="well" style="font-size: 12px;"><img ng-show="analyzerStatus.isSuccessful" src="img/blue.png"/><img ng-hide="analyzerStatus.isSuccessful" src="img/red.png"/> Last analysis: {{analyzerStatus.lastExecution | date:'MM/dd/yy @ H:mm:ss'}} <img ng-show="analyzerStatus.isExecuting" src="img/spinner.gif"/>
			</div>
		</div>
	</div>
	<div class="span5">
		<div>
			<!-- Jobs -->
			
			<div ng-repeat="job in jobs | nonStableJobs | filter:{watch:true} |jobType:jobTypes">
				<div class="alert" 
					ng-mouseenter="job.showActions=true" 
					ng-mouseleave="job.showActions=false" 
					style="margin-bottom: 0px;" 
					ng-class="{ 'alert-error': job.status=='FAILED', 
								'alert-success': job.status=='STABLE', 
								'alert-info': job.status=='ABORTED' || job.status=='DISABLED' || job.status=='NEW'}">
					<a href="" ng-click="showBuild(job)" tooltip="Show details"><i class="icon-list-alt"></i></a>&nbsp;<strong>{{job.name}}</strong>
					<span class="pull-right" style="font-size: 36px;">
						<strong>{{job.lastBuild.failedTestCount}}</strong> <img ng-src="{{imageJobStatus(job)}}"/>
					</span><BR>
					<div style="font-size: 12px;overflow:hidden;word-wrap:break-word;">
						<div ng-repeat="run in getRuns(job)" ng-show="job.lastBuild.failedTestCount < 6">
							<span ng-show="job.lastBuild.childBuilds.length >0"><strong>{{run.displayName}}</strong></span>
							<div ng-repeat="failure in run.failures">
								<blockquote ng-show="failure.summary" style="margin:0px;"><i class="icon-exclamation-sign"></i>&nbsp;{{failure.summary}} <span ng-show="failure.randomFailure" class="label label-warning">Random</span></blockquote>
								<span ng-show="failure.age">
									<i ng-class="{'icon-chevron-right' : !failure.showDetails, 'icon-chevron-down': !!failure.showDetails}"
										ng-click="failure.showDetails=!failure.showDetails"></i>&nbsp;
										<a ng-href="{{failure.url}}" target="_blank">{{failure.testMethodName}}</a> (Age:{{failure.age}}) <span ng-show="failure.randomFailure" class="label label-warning">Random</span>
									<blockquote ng-show="failure.showDetails"> {{failure.errorDetails}}</blockquote>
								</span>
								<ul ng-show="failure.showDetails||(failure.summary&&job.showActions)" class="inline" style="font-size: 12px;">
									<li><a href="" ng-click="toggleRandomFailure(failure)"><i class="icon-random"></i>&nbsp;Mark/unmark as random</a></li>
								</ul>
							</div>
						</div>
					</div>
					<ul class="inline" ng-show="job.showActions" style="font-size: 12px;">
						<li><a href="{{job.url}}" target="_blank"><i class="icon-circle-arrow-right"></i>&nbsp;URL</a></li>
						<li><a href="{{job.url}}/{{job.lastBuild.buildNumber}}/console" target="_blank"><img src="img/terminal.png" width="16px"/>&nbsp;Console</a></li>
						<li><a href="" ng-click="showBuild(job)"><i class="icon-list-alt"></i>&nbsp;Show details</a></li>
						<li><a href="" ng-click="createJobTask(job)"><i class="icon-wrench"></i>&nbsp;Add task to fix this</a></li>
						<li><a href="" ng-click="stopWatching(job)"><i class="icon-eye-close"></i>&nbsp;Stop watching</a></li>
					</ul>
				</div>
			</div>
		</div>
	
	</div>
	<div class="span4">
		<div ng-repeat="task in tasks | orderBy:'done'">
			<div class="alert"
				ng-mouseenter="task.showActions=true" 
				ng-mouseleave="task.showActions=false" 
				ng-class="{ 'alert-success': task.done }"
				style="margin-bottom: 0px;">
				<a href="" ng-click="showTask(task, tasks)" tooltip="Show details"><i class="icon-flag"></i></a>&nbsp;{{task.summary}}
				<span class="pull-right" style="font-size: 12px;" >
					{{task.updateDate | date:'MM/dd/yy @ h:mma'}}
					<img tooltip="{{task.assignee.fullName}}" ng-show="task.assignee" ng-src="http://srv-ind-scrat:8060/avatar/{{task.assignee.userName}}?s=32"/>
				</span>
				<BR>
				<span style="font-size: 12px;" ng-show="task.details" ng-bind-html-unsafe="task.details">
					<BR>
				</span>
				<ul class="inline" ng-show="task.showActions" style="font-size: 12px;">
					<li><a href="" ng-click="showTask(task, tasks)"><i class="icon-list-alt"></i>&nbsp;Show details</a></li>
					<li><a href="" ng-click="task.done = !task.done;change(task)"><i ng-class="{ 'icon-ok-sign': !task.done, 'icon-remove-circle': task.done }"></i>&nbsp;<span ng-hide="task.done">Mark done</span><span ng-show="task.done">Uncomplete task</span></a></li>
					<li class="dropdown">
						  <a class="dropdown-toggle">
						    <i class="icon-user"></i>&nbsp;Change assignee
						  </a>
						  <ul class="dropdown-menu">
						    <li ng-repeat="user in users">
						      <a ng-click="changeAssignee(task, user)">{{user.fullName}}</a>
						    </li>
						  </ul>
					</li>
					<li><a href="" ng-click="destroy(tasks, task)"><i class="icon-trash"></i>&nbsp;Delete task</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>